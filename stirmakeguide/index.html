<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Scalable true implementation of recursive make (stirmake), user's guide</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Scalable true implementation of recursive make (stirmake), user's guide" /><link rel="next" href="pt01.html" title="Part I. Make, a historical tool" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Scalable true implementation of recursive make (stirmake), user's guide</th></tr><tr><td width="20%" align="left"> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="pt01.html">Next</a></td></tr></table><hr /></div><div class="book"><div class="titlepage"><div><div><h1 class="title"><a id="stirmake"></a>Scalable true implementation of recursive make (stirmake), user's guide</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Juha-Matti</span> <span class="surname">Tilli</span></h3></div></div><div><p class="copyright">Copyright © 2018-2026 Juha-Matti Tilli</p></div><div><p class="copyright">Copyright © 2017-2019 Aalto University</p></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="part"><a href="pt01.html">I. Make, a historical tool</a></span></dt><dd><dl><dt><span class="chapter"><a href="ch01.html">1. Make, the de facto build tool</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch01.html#basics">Introduction to basics of make</a></span></dt><dt><span class="sect1"><a href="ch01.html#cleanandmakefiledep">Cleaning and dependency on Makefile</a></span></dt><dt><span class="sect1"><a href="ch01.html#largerprojects">Somewhat larger single-directory projects</a></span></dt><dt><span class="sect1"><a href="ch01.html#headerfile">Header file dependencies</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch02.html">2. Where make fails, multi-directory projects</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch02.html#makedirsep">Make with directory separators</a></span></dt><dt><span class="sect1"><a href="ch02.html#makefileperdir">Another approach: Makefile per directory</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02.html#recursivemaketest">Let's try recursive make</a></span></dt><dt><span class="sect2"><a href="ch02.html#nocommonnamespace">Fixing no common namespace: include file</a></span></dt><dt><span class="sect2"><a href="ch02.html#dangersofseparating">Drawbacks and dangers of separating build to multiple DAGs</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch02.html#inclusivemake">Another approach: one Makefile, module.mk per directory</a></span></dt><dt><span class="sect1"><a href="ch02.html#parallelmake">Parallel make, jobserver and lack of multiple targets</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="pt02.html">II. Stirmake, a modern tool</a></span></dt><dd><dl><dt><span class="chapter"><a href="ch03.html">3. Introducing stirmake</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch03.html#stirmakeinstall">Compiling and installing stirmake</a></span></dt><dt><span class="sect1"><a href="ch03.html#helloworld">Compiling hello world</a></span></dt><dt><span class="sect1"><a href="ch03.html#modularhellolib">Modular hello from library</a></span></dt><dt><span class="sect1"><a href="ch03.html#environmentandconf">Environment and configuration commands</a></span></dt><dt><span class="sect1"><a href="ch03.html#multiprocessing">Multiprocessor machines</a></span></dt><dt><span class="sect1"><a href="ch03.html#tracingdebugging">Tracing and debugging</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch04.html">4. Variables, data types and functions</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch04.html#dump">Dump: hello from stirmake</a></span></dt><dt><span class="sect1"><a href="ch04.html#variables">Defining variables</a></span></dt><dt><span class="sect1"><a href="ch04.html#specvar">Special variables</a></span></dt><dt><span class="sect1"><a href="ch04.html#datatypes">Data types, finally we can have spaces in filenames!</a></span></dt><dt><span class="sect1"><a href="ch04.html#conditionals">Conditionals</a></span></dt><dt><span class="sect1"><a href="ch04.html#loops">Loops</a></span></dt><dt><span class="sect1"><a href="ch04.html#string">String</a></span></dt><dt><span class="sect1"><a href="ch04.html#array">Array</a></span></dt><dt><span class="sect1"><a href="ch04.html#simpletypes">Simple data types: number, boolean, nil</a></span></dt><dt><span class="sect1"><a href="ch04.html#tree">Tree</a></span></dt><dt><span class="sect1"><a href="ch04.html#functiondelayeval">Functions and delayed evaluation</a></span></dt><dt><span class="sect1"><a href="ch04.html#functionglobalscope">Functions, global variables and scoping</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch05.html">5. How Stirmake executes its commands</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch05.html#idp3">Different ways of executing commands</a></span></dt><dt><span class="sect1"><a href="ch05.html#idp4">The dangers of shell expansion</a></span></dt><dt><span class="sect1"><a href="ch05.html#idp5">Invoking shell manually</a></span></dt><dt><span class="sect1"><a href="ch05.html#idp6">Build command, timestamp and file size database</a></span></dt><dt><span class="sect1"><a href="ch05.html#idp7">Move madness</a></span></dt><dt><span class="sect1"><a href="ch05.html#idp8">Command options: ignore, noecho, ismake, automatic make detection</a></span></dt><dt><span class="sect1"><a href="ch05.html#idp9">@glob and the dangers of @glob in middle of many commands</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch06.html">6. Automated cleaning with stirmake</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch06.html#idp10">Automated cleaning</a></span></dt><dt><span class="sect1"><a href="ch06.html#idp11">Hooks</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch07.html">7. Conditional compilation</a></span></dt><dt><span class="chapter"><a href="ch08.html">8. Example projects</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch08.html#idp12">mploop</a></span></dt><dt><span class="sect1"><a href="ch08.html#idp13">quictest</a></span></dt><dt><span class="sect1"><a href="ch08.html#idp14">steamingatof</a></span></dt><dt><span class="sect1"><a href="ch08.html#idp15">prettyftoa</a></span></dt><dt><span class="sect1"><a href="ch08.html#idp16">rlctrans</a></span></dt><dt><span class="sect1"><a href="ch08.html#idp17">jmalloc</a></span></dt><dt><span class="sect1"><a href="ch08.html#idp18">abce</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="pt03.html">III. Stirmake in large-scale systems</a></span></dt><dd><dl><dt><span class="chapter"><a href="ch09.html">9. Stirmake for entire project structures</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch09.html#idp19">Including sub-projects</a></span></dt><dt><span class="sect1"><a href="ch09.html#idp20">Invoking stirmake: smka, smkp, smkt</a></span></dt><dt><span class="sect1"><a href="ch09.html#idp21">Controlling what to export with holey scopes</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch10.html">10. Make revolution, one project at a time</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch10.html#idp22">Not everyone uses stirmake yet</a></span></dt><dt><span class="sect1"><a href="ch10.html#idp23">Interfacing to command-line tools that specify flags etc</a></span></dt><dt><span class="sect1"><a href="ch10.html#idp24">Interfacing to environment</a></span></dt><dt><span class="sect1"><a href="ch10.html#idp25">Why compiler name should be a list with arguments</a></span></dt><dt><span class="sect1"><a href="ch10.html#idp26">Integration to subproject cleaning systems with clean hooks</a></span></dt><dt><span class="sect1"><a href="ch10.html#idp27">Recursive directory dependencies</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch11.html">11. Scoping and subdirectories</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch11.html#lexdyn">Lexical and dynamic scoping</a></span></dt><dt><span class="sect1"><a href="ch11.html#creatingscopes">Creating new scopes, and holey scopes</a></span></dt><dt><span class="sect1"><a href="ch11.html#namedscopes">Named scopes and accessing them</a></span></dt><dt><span class="sect1"><a href="ch11.html#dirupdirdown">Specifying library lists that work everywhere</a></span></dt><dt><span class="sect1"><a href="ch11.html#idp28">Pathnames</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch12.html">12. Example large or complex projects</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch12.html#idp29">camftpd</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp30">fastdiv</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp31">pptk</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp32">nmsynproxy</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp33">ldpairwall</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp34">cghcpcli</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp35">yale</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp36">stirmake</a></span></dt><dt><span class="sect1"><a href="ch12.html#idp37">caj</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="pt04.html">IV. Advanced stirmake programming</a></span></dt><dd><dl><dt><span class="chapter"><a href="ch13.html">13. Programming Stirmake with Amyplan</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch13.html#idp38">abce and Amyplan</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp39">Installing Amyplan in abce</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp40">Creating Amyplan scripts</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp41">No read/eval/print loop (REPL)</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp42">Immutable strings and mutable packet buffers</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp43">I/O streams and interacting with them</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp44">Mathematical functions and floating-point numbers</a></span></dt><dt><span class="sect1"><a href="ch13.html#idp45">JSON</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch14.html">14. Advanced tricks</a></span></dt><dd><dl><dt><span class="sect1"><a href="ch14.html#idp46">Order-only dependencies</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp47">Separate build directory</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp48">Pattern rules</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp49">Scopes stored in variables</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp50">Function data types and builtin wrappers</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp51">@deponly for additional dependencies</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp52">@order and @wait</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp53">Dynamically adding dependencies</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp54">Dynamically adding rules</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp55">Finding stirmake version and version history</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp56">Version conditionals and minimum version requirements, future builtins</a></span></dt><dt><span class="sect1"><a href="ch14.html#idp57">Hacking abce</a></span></dt></dl></dd></dl></dd></dl></div>
  
  
  
  
  
</div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="pt01.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"> </td><td width="40%" align="right" valign="top"> Part I. Make, a historical tool</td></tr></table></div></body></html>